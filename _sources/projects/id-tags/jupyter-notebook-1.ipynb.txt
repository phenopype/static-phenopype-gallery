{
 "cells": [
  {
   "attachments": {},
   "cell_type": "markdown",
   "id": "d74b0e19-7c2c-4864-9c26-30d1f2bb41a7",
   "metadata": {},
   "source": [
    "# ID tags\n",
    "\n",
    "For a more detailed description see: [www.phenopype.org/gallery/projects/id-tags/](https://www.phenopype.org/gallery/projects/id-tags/)`"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "id": "c2a5bf9a-e316-4d64-be74-39834ed9ed01",
   "metadata": {},
   "outputs": [],
   "source": [
    "import phenopype as pp\n",
    "import os \n",
    "\n",
    "## my root directory - modify as needed\n",
    "os.chdir(r\"D:\\science\\packages\\phenopype\\phenopype-gallery_exec\")\n",
    "\n",
    "## my laptop has a small screen, so I use a smaller phenopype window\n",
    "pp._config.window_max_dim = 800"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "0fcf1375-9eed-470b-9720-9ed36e8e1b6d",
   "metadata": {},
   "source": [
    "## Make phenopype project\n",
    "\n",
    "Create a phenopype project (remember, `Project` is used to both create new projects, and load existing ones). Different phenopype projects can be useful, e.g., to process different batches of images from field seasons, perspectives, etc,. It makes sense to create them side by side in a subfolder, which I call \"phenopype\". Thus, my research projects often have the following directory structure (just my way of working - this is really totally up to you):\n",
    "\n",
    "```\n",
    "my-project\n",
    "    data                       # processed data (e.g., tables)\n",
    "    data_raw                   # raw data (images, videos, etc.)\n",
    "    phenopype                  # phenopype projects\n",
    "    phenopype_templates        # phenopype .yaml config templates\n",
    "    scripts                    # python, R, etc.\n",
    "    [...]                      # manuscripts, figures, literature, etc.\n",
    "```"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "bd05755a-41be-4021-84f3-7e98ea52511d",
   "metadata": {},
   "outputs": [],
   "source": [
    "proj = pp.Project(r\"phenopype\\id-tags\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "id": "adf4afe5-d638-4fb0-a69c-8b38440c1571",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "--------------------------------------------\n",
      "phenopype will search for image files at\n",
      "\n",
      "D:\\science\\packages\\phenopype\\phenopype-gallery\\data_raw\\id-tags\n",
      "\n",
      "using the following settings:\n",
      "\n",
      "filetypes: ['jpg', 'JPG', 'jpeg', 'JPEG', 'tif', 'png', 'bmp'], include: [], exclude: [], mode: copy, recursive: False, resize: False, unique: path\n",
      "\n",
      "Found image 2020_05_22_time_13_19_11_554000_roi_00.tif - phenopype-project folder 0__2020_05_22_time_13_19_11_554000_roi_00 created\n",
      "Found image 2020_05_26_time_13_39_39_385000_roi_00.tif - phenopype-project folder 0__2020_05_26_time_13_39_39_385000_roi_00 created\n",
      "Found image 2020_05_28_time_14_45_38_908000_roi_00.tif - phenopype-project folder 0__2020_05_28_time_14_45_38_908000_roi_00 created\n",
      "Found image 2020_05_31_time_13_03_06_552000_roi_00.tif - phenopype-project folder 0__2020_05_31_time_13_03_06_552000_roi_00 created\n",
      "Found image 2020_05_31_time_13_03_06_552000_roi_01.tif - phenopype-project folder 0__2020_05_31_time_13_03_06_552000_roi_01 created\n",
      "Found image 2020_05_31_time_13_03_06_552000_roi_02.tif - phenopype-project folder 0__2020_05_31_time_13_03_06_552000_roi_02 created\n",
      "Found image 2020_05_31_time_13_03_06_552000_roi_03.tif - phenopype-project folder 0__2020_05_31_time_13_03_06_552000_roi_03 created\n",
      "Found image 2020_05_31_time_13_03_06_552000_roi_04.tif - phenopype-project folder 0__2020_05_31_time_13_03_06_552000_roi_04 created\n",
      "Found image 2020_05_31_time_13_03_06_552000_roi_05.tif - phenopype-project folder 0__2020_05_31_time_13_03_06_552000_roi_05 created\n",
      "Found image 2020_05_31_time_13_31_17_392000_roi_00.tif - phenopype-project folder 0__2020_05_31_time_13_31_17_392000_roi_00 created\n",
      "Found image 2020_05_31_time_13_31_17_392000_roi_01.tif - phenopype-project folder 0__2020_05_31_time_13_31_17_392000_roi_01 created\n",
      "Found image 2020_05_31_time_13_31_17_392000_roi_02.tif - phenopype-project folder 0__2020_05_31_time_13_31_17_392000_roi_02 created\n",
      "\n",
      "Found 12 files - using all\n",
      "--------------------------------------------\n"
     ]
    }
   ],
   "source": [
    "proj.add_files(\"data_raw\\id-tags\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "id": "dca8218e-b911-464d-87cd-b4178081b07a",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "- template saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_22_time_13_19_11_554000_roi_00\\pype_config_v1.yaml\n",
      "- template saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_26_time_13_39_39_385000_roi_00\\pype_config_v1.yaml\n",
      "- template saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_28_time_14_45_38_908000_roi_00\\pype_config_v1.yaml\n",
      "- template saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_03_06_552000_roi_00\\pype_config_v1.yaml\n",
      "- template saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_03_06_552000_roi_01\\pype_config_v1.yaml\n",
      "- template saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_03_06_552000_roi_02\\pype_config_v1.yaml\n",
      "- template saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_03_06_552000_roi_03\\pype_config_v1.yaml\n",
      "- template saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_03_06_552000_roi_04\\pype_config_v1.yaml\n",
      "- template saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_03_06_552000_roi_05\\pype_config_v1.yaml\n",
      "- template saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_31_17_392000_roi_00\\pype_config_v1.yaml\n",
      "- template saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_31_17_392000_roi_01\\pype_config_v1.yaml\n",
      "- template saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_31_17_392000_roi_02\\pype_config_v1.yaml\n"
     ]
    }
   ],
   "source": [
    "proj.add_config(template_path=\"phenopype_templates\\id-tags_template1.yaml\", tag=\"v1\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "id": "05242e3f-cecb-426d-ac11-f304c7cbf581",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\n",
      "AUTOLOAD\n",
      "- annotations loaded:\n",
      "{\n",
      "\"comment\": [\"a\"]\n",
      "}\n",
      "- starting config file monitor\n",
      "\n",
      "\n",
      "------------+++ new pype iteration 2023-11-11 12:18:08 +++--------------\n",
      "\n",
      "==> image name: 2020_05_22_time_13_19_11_554000_roi_00.tif\n",
      "\n",
      "\n",
      "PREPROCESSING\n",
      "write_comment\n",
      "- loaded existing annotation of type \"comment\" with ID \"a\": skipping (edit=False)\n",
      "\n",
      "\n",
      "VISUALIZATION\n",
      "draw_comment\n",
      "\n",
      "\n",
      "EXPORT\n",
      "save_annotation\n",
      "- loading existing annotation file\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- updating annotations of type \"comment\" with id \"a\" in \"annotations_v1.json\" (overwrite=\"entry\")\n",
      "export_csv\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- exported csv for type comment\n",
      "save_canvas\n",
      "- image saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_22_time_13_19_11_554000_roi_00\\canvas_v1.jpg (overwritten).\n",
      "\n",
      "\n",
      "------------+++ finished pype iteration +++--------------\n",
      "-------(End with Ctrl+Enter or re-run with Enter)--------\n",
      "\n",
      "\n",
      "AUTOSHOW\n",
      "\n",
      "\n",
      "TERMINATE\n",
      "\n",
      "AUTOSAVE\n",
      "- nothing to autosave\n",
      "\n",
      "AUTOLOAD\n",
      "- annotations loaded:\n",
      "{\n",
      "\"comment\": [\"a\"]\n",
      "}\n",
      "- starting config file monitor\n",
      "\n",
      "\n",
      "------------+++ new pype iteration 2023-11-11 12:18:14 +++--------------\n",
      "\n",
      "==> image name: 2020_05_26_time_13_39_39_385000_roi_00.tif\n",
      "\n",
      "\n",
      "PREPROCESSING\n",
      "write_comment\n",
      "- loaded existing annotation of type \"comment\" with ID \"a\": skipping (edit=False)\n",
      "\n",
      "\n",
      "VISUALIZATION\n",
      "draw_comment\n",
      "\n",
      "\n",
      "EXPORT\n",
      "save_annotation\n",
      "- loading existing annotation file\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- updating annotations of type \"comment\" with id \"a\" in \"annotations_v1.json\" (overwrite=\"entry\")\n",
      "export_csv\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- exported csv for type comment\n",
      "save_canvas\n",
      "- image saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_26_time_13_39_39_385000_roi_00\\canvas_v1.jpg (overwritten).\n",
      "\n",
      "\n",
      "------------+++ finished pype iteration +++--------------\n",
      "-------(End with Ctrl+Enter or re-run with Enter)--------\n",
      "\n",
      "\n",
      "AUTOSHOW\n",
      "\n",
      "\n",
      "TERMINATE\n",
      "\n",
      "AUTOSAVE\n",
      "- nothing to autosave\n",
      "\n",
      "AUTOLOAD\n",
      "- annotations loaded:\n",
      "{\n",
      "\"comment\": [\"a\"]\n",
      "}\n",
      "- starting config file monitor\n",
      "\n",
      "\n",
      "------------+++ new pype iteration 2023-11-11 12:18:16 +++--------------\n",
      "\n",
      "==> image name: 2020_05_28_time_14_45_38_908000_roi_00.tif\n",
      "\n",
      "\n",
      "PREPROCESSING\n",
      "write_comment\n",
      "- loaded existing annotation of type \"comment\" with ID \"a\": skipping (edit=False)\n",
      "\n",
      "\n",
      "VISUALIZATION\n",
      "draw_comment\n",
      "\n",
      "\n",
      "EXPORT\n",
      "save_annotation\n",
      "- loading existing annotation file\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- updating annotations of type \"comment\" with id \"a\" in \"annotations_v1.json\" (overwrite=\"entry\")\n",
      "export_csv\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- exported csv for type comment\n",
      "save_canvas\n",
      "- image saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_28_time_14_45_38_908000_roi_00\\canvas_v1.jpg (overwritten).\n",
      "\n",
      "\n",
      "------------+++ finished pype iteration +++--------------\n",
      "-------(End with Ctrl+Enter or re-run with Enter)--------\n",
      "\n",
      "\n",
      "AUTOSHOW\n",
      "\n",
      "\n",
      "------------+++ new pype iteration 2023-11-11 12:18:20 +++--------------\n",
      "\n",
      "==> image name: 2020_05_28_time_14_45_38_908000_roi_00.tif\n",
      "\n",
      "\n",
      "PREPROCESSING\n",
      "write_comment\n",
      "- loaded existing annotation of type \"comment\" with ID \"a\": editing (edit=True)\n",
      "\n",
      "\n",
      "VISUALIZATION\n",
      "draw_comment\n",
      "\n",
      "\n",
      "EXPORT\n",
      "save_annotation\n",
      "- loading existing annotation file\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- updating annotations of type \"comment\" with id \"a\" in \"annotations_v1.json\" (overwrite=\"entry\")\n",
      "export_csv\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- exported csv for type comment\n",
      "save_canvas\n",
      "- image saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_28_time_14_45_38_908000_roi_00\\canvas_v1.jpg (overwritten).\n",
      "\n",
      "\n",
      "------------+++ finished pype iteration +++--------------\n",
      "-------(End with Ctrl+Enter or re-run with Enter)--------\n",
      "\n",
      "\n",
      "AUTOSHOW\n",
      "\n",
      "\n",
      "TERMINATE\n",
      "\n",
      "AUTOSAVE\n",
      "- nothing to autosave\n",
      "\n",
      "AUTOLOAD\n",
      " - nothing to autoload\n",
      "- starting config file monitor\n",
      "\n",
      "\n",
      "------------+++ new pype iteration 2023-11-11 12:18:26 +++--------------\n",
      "\n",
      "==> image name: 2020_05_31_time_13_03_06_552000_roi_00.tif\n",
      "\n",
      "\n",
      "PREPROCESSING\n",
      "write_comment\n",
      "\n",
      "\n",
      "VISUALIZATION\n",
      "draw_comment\n",
      "\n",
      "\n",
      "EXPORT\n",
      "save_annotation\n",
      "- creating new annotation file\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- writing annotations of type \"comment\" with id \"a\" to \"annotations_v1.json\"\n",
      "export_csv\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- exported csv for type comment\n",
      "save_canvas\n",
      "- image saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_03_06_552000_roi_00\\canvas_v1.jpg.\n",
      "\n",
      "\n",
      "------------+++ finished pype iteration +++--------------\n",
      "-------(End with Ctrl+Enter or re-run with Enter)--------\n",
      "\n",
      "\n",
      "AUTOSHOW\n",
      "\n",
      "\n",
      "TERMINATE\n",
      "\n",
      "AUTOSAVE\n",
      "- nothing to autosave\n",
      "\n",
      "AUTOLOAD\n",
      " - nothing to autoload\n",
      "- starting config file monitor\n",
      "\n",
      "\n",
      "------------+++ new pype iteration 2023-11-11 12:18:31 +++--------------\n",
      "\n",
      "==> image name: 2020_05_31_time_13_03_06_552000_roi_01.tif\n",
      "\n",
      "\n",
      "PREPROCESSING\n",
      "write_comment\n",
      "\n",
      "\n",
      "VISUALIZATION\n",
      "draw_comment\n",
      "\n",
      "\n",
      "EXPORT\n",
      "save_annotation\n",
      "- creating new annotation file\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- writing annotations of type \"comment\" with id \"a\" to \"annotations_v1.json\"\n",
      "export_csv\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- exported csv for type comment\n",
      "save_canvas\n",
      "- image saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_03_06_552000_roi_01\\canvas_v1.jpg.\n",
      "\n",
      "\n",
      "------------+++ finished pype iteration +++--------------\n",
      "-------(End with Ctrl+Enter or re-run with Enter)--------\n",
      "\n",
      "\n",
      "AUTOSHOW\n",
      "\n",
      "\n",
      "TERMINATE\n",
      "\n",
      "AUTOSAVE\n",
      "- nothing to autosave\n",
      "\n",
      "AUTOLOAD\n",
      " - nothing to autoload\n",
      "- starting config file monitor\n",
      "\n",
      "\n",
      "------------+++ new pype iteration 2023-11-11 12:18:43 +++--------------\n",
      "\n",
      "==> image name: 2020_05_31_time_13_03_06_552000_roi_02.tif\n",
      "\n",
      "\n",
      "PREPROCESSING\n",
      "write_comment\n",
      "\n",
      "\n",
      "VISUALIZATION\n",
      "draw_comment\n",
      "\n",
      "\n",
      "EXPORT\n",
      "save_annotation\n",
      "- creating new annotation file\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- writing annotations of type \"comment\" with id \"a\" to \"annotations_v1.json\"\n",
      "export_csv\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- exported csv for type comment\n",
      "save_canvas\n",
      "- image saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_03_06_552000_roi_02\\canvas_v1.jpg.\n",
      "\n",
      "\n",
      "------------+++ finished pype iteration +++--------------\n",
      "-------(End with Ctrl+Enter or re-run with Enter)--------\n",
      "\n",
      "\n",
      "AUTOSHOW\n",
      "\n",
      "\n",
      "TERMINATE\n",
      "\n",
      "AUTOSAVE\n",
      "- nothing to autosave\n",
      "\n",
      "AUTOLOAD\n",
      " - nothing to autoload\n",
      "- starting config file monitor\n",
      "\n",
      "\n",
      "------------+++ new pype iteration 2023-11-11 12:18:51 +++--------------\n",
      "\n",
      "==> image name: 2020_05_31_time_13_03_06_552000_roi_03.tif\n",
      "\n",
      "\n",
      "PREPROCESSING\n",
      "write_comment\n",
      "\n",
      "\n",
      "VISUALIZATION\n",
      "draw_comment\n",
      "\n",
      "\n",
      "EXPORT\n",
      "save_annotation\n",
      "- creating new annotation file\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- writing annotations of type \"comment\" with id \"a\" to \"annotations_v1.json\"\n",
      "export_csv\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- exported csv for type comment\n",
      "save_canvas\n",
      "- image saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_03_06_552000_roi_03\\canvas_v1.jpg.\n",
      "\n",
      "\n",
      "------------+++ finished pype iteration +++--------------\n",
      "-------(End with Ctrl+Enter or re-run with Enter)--------\n",
      "\n",
      "\n",
      "AUTOSHOW\n",
      "\n",
      "\n",
      "TERMINATE\n",
      "\n",
      "AUTOSAVE\n",
      "- nothing to autosave\n",
      "\n",
      "AUTOLOAD\n",
      " - nothing to autoload\n",
      "- starting config file monitor\n",
      "\n",
      "\n",
      "------------+++ new pype iteration 2023-11-11 12:18:54 +++--------------\n",
      "\n",
      "==> image name: 2020_05_31_time_13_03_06_552000_roi_04.tif\n",
      "\n",
      "\n",
      "PREPROCESSING\n",
      "write_comment\n",
      "\n",
      "\n",
      "VISUALIZATION\n",
      "draw_comment\n",
      "\n",
      "\n",
      "EXPORT\n",
      "save_annotation\n",
      "- creating new annotation file\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- writing annotations of type \"comment\" with id \"a\" to \"annotations_v1.json\"\n",
      "export_csv\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- exported csv for type comment\n",
      "save_canvas\n",
      "- image saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_03_06_552000_roi_04\\canvas_v1.jpg.\n",
      "\n",
      "\n",
      "------------+++ finished pype iteration +++--------------\n",
      "-------(End with Ctrl+Enter or re-run with Enter)--------\n",
      "\n",
      "\n",
      "AUTOSHOW\n",
      "\n",
      "\n",
      "TERMINATE\n",
      "\n",
      "AUTOSAVE\n",
      "- nothing to autosave\n",
      "\n",
      "AUTOLOAD\n",
      " - nothing to autoload\n",
      "- starting config file monitor\n",
      "\n",
      "\n",
      "------------+++ new pype iteration 2023-11-11 12:18:58 +++--------------\n",
      "\n",
      "==> image name: 2020_05_31_time_13_03_06_552000_roi_05.tif\n",
      "\n",
      "\n",
      "PREPROCESSING\n",
      "write_comment\n",
      "\n",
      "\n",
      "VISUALIZATION\n",
      "draw_comment\n",
      "\n",
      "\n",
      "EXPORT\n",
      "save_annotation\n",
      "- creating new annotation file\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- writing annotations of type \"comment\" with id \"a\" to \"annotations_v1.json\"\n",
      "export_csv\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- exported csv for type comment\n",
      "save_canvas\n",
      "- image saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_03_06_552000_roi_05\\canvas_v1.jpg.\n",
      "\n",
      "\n",
      "------------+++ finished pype iteration +++--------------\n",
      "-------(End with Ctrl+Enter or re-run with Enter)--------\n",
      "\n",
      "\n",
      "AUTOSHOW\n",
      "\n",
      "\n",
      "TERMINATE\n",
      "\n",
      "AUTOSAVE\n",
      "- nothing to autosave\n",
      "\n",
      "AUTOLOAD\n",
      " - nothing to autoload\n",
      "- starting config file monitor\n",
      "\n",
      "\n",
      "------------+++ new pype iteration 2023-11-11 12:19:03 +++--------------\n",
      "\n",
      "==> image name: 2020_05_31_time_13_31_17_392000_roi_00.tif\n",
      "\n",
      "\n",
      "PREPROCESSING\n",
      "write_comment\n",
      "\n",
      "\n",
      "VISUALIZATION\n",
      "draw_comment\n",
      "\n",
      "\n",
      "EXPORT\n",
      "save_annotation\n",
      "- creating new annotation file\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- writing annotations of type \"comment\" with id \"a\" to \"annotations_v1.json\"\n",
      "export_csv\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- exported csv for type comment\n",
      "save_canvas\n",
      "- image saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_31_17_392000_roi_00\\canvas_v1.jpg.\n",
      "\n",
      "\n",
      "------------+++ finished pype iteration +++--------------\n",
      "-------(End with Ctrl+Enter or re-run with Enter)--------\n",
      "\n",
      "\n",
      "AUTOSHOW\n",
      "\n",
      "\n",
      "TERMINATE\n",
      "\n",
      "AUTOSAVE\n",
      "- nothing to autosave\n",
      "\n",
      "AUTOLOAD\n",
      " - nothing to autoload\n",
      "- starting config file monitor\n",
      "\n",
      "\n",
      "------------+++ new pype iteration 2023-11-11 12:19:07 +++--------------\n",
      "\n",
      "==> image name: 2020_05_31_time_13_31_17_392000_roi_01.tif\n",
      "\n",
      "\n",
      "PREPROCESSING\n",
      "write_comment\n",
      "\n",
      "\n",
      "VISUALIZATION\n",
      "draw_comment\n",
      "\n",
      "\n",
      "EXPORT\n",
      "save_annotation\n",
      "- creating new annotation file\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- writing annotations of type \"comment\" with id \"a\" to \"annotations_v1.json\"\n",
      "export_csv\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- exported csv for type comment\n",
      "save_canvas\n",
      "- image saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_31_17_392000_roi_01\\canvas_v1.jpg.\n",
      "\n",
      "\n",
      "------------+++ finished pype iteration +++--------------\n",
      "-------(End with Ctrl+Enter or re-run with Enter)--------\n",
      "\n",
      "\n",
      "AUTOSHOW\n",
      "\n",
      "\n",
      "TERMINATE\n",
      "\n",
      "AUTOSAVE\n",
      "- nothing to autosave\n",
      "\n",
      "AUTOLOAD\n",
      " - nothing to autoload\n",
      "- starting config file monitor\n",
      "\n",
      "\n",
      "------------+++ new pype iteration 2023-11-11 12:19:11 +++--------------\n",
      "\n",
      "==> image name: 2020_05_31_time_13_31_17_392000_roi_02.tif\n",
      "\n",
      "\n",
      "PREPROCESSING\n",
      "write_comment\n",
      "\n",
      "\n",
      "VISUALIZATION\n",
      "draw_comment\n",
      "\n",
      "\n",
      "EXPORT\n",
      "save_annotation\n",
      "- creating new annotation file\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- writing annotations of type \"comment\" with id \"a\" to \"annotations_v1.json\"\n",
      "export_csv\n",
      "- no annotation_type selected - exporting all annotations\n",
      "- exported csv for type comment\n",
      "save_canvas\n",
      "- image saved under D:\\science\\packages\\phenopype\\phenopype-gallery\\phenopype\\id-tags\\data\\0__2020_05_31_time_13_31_17_392000_roi_02\\canvas_v1.jpg.\n",
      "\n",
      "\n",
      "------------+++ finished pype iteration +++--------------\n",
      "-------(End with Ctrl+Enter or re-run with Enter)--------\n",
      "\n",
      "\n",
      "AUTOSHOW\n",
      "\n",
      "\n",
      "TERMINATE\n",
      "\n",
      "AUTOSAVE\n",
      "- nothing to autosave\n"
     ]
    }
   ],
   "source": [
    "for path in proj.dir_paths: \n",
    "    p = pp.Pype(path, \"v1\", \n",
    "                # autoshow=False,             # set to False to not have to confirm the end of an iteration with CTRL+Enter\n",
    "                # skip=\"comment\",             # set to True to skip to next non-processed image \n",
    "                )\n",
    "    "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 43,
   "id": "86ece019-9e14-4581-9fdb-924ee1ab5405",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "file \"canvas\": found 12 results in 12 project folders\n",
      "file \"comment\": found 12 results in 12 project folders\n",
      "Saving file comment_v1.csv\n"
     ]
    }
   ],
   "source": [
    "## collect results\n",
    "proj.collect_results(files=[\"canvas\", \"comment\"], tag=\"v1\", aggregate_csv=True, overwrite=True)"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.9.18"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
